<div class="page">
  <div class="page-header">
    <div class="left">
      <h1>Cargas</h1>
      <p>Gerencie as cargas e viagens</p>
    </div>

    <button class="primary-btn" type="button" (click)="novaCarga()">
      <i class="fas fa-plus"></i>
      Nova Carga
    </button>
  </div>

  <div class="card">
    <div class="toolbar">
      <div class="search">
        <i class="fas fa-magnifying-glass"></i>
        <input
          type="text"
          [(ngModel)]="search"
          placeholder="Buscar por número, placa ou motorista..."
        />
      </div>

      <select class="select" [(ngModel)]="statusFilter">
        <option value="Todos">Todos</option>
        <option value="EM_ANDAMENTO">Em Andamento</option>
        <option value="FINALIZADA">Finalizada</option>
        <option value="CANCELADA">Cancelada</option>
      </select>
    </div>

    <div class="table-wrap">
      <table class="table">
        <thead>
        <tr>
          <th>Número</th>
          <th>Caminhão</th>
          <th>Motorista</th>
          <th>Data Fat.</th>
          <th>Valor</th>
          <th>Status</th>
          <th class="actions-col">Ações</th>
        </tr>
        </thead>

        <tbody>
        <tr *ngFor="let c of filtered">
          <td class="number">{{ c.numero }}</td>
          <td class="muted">{{ c.caminhao || '-' }}</td>
          <td class="muted">{{ c.motorista || '-' }}</td>
          <td>{{ c.dataFat }}</td>
          <td>{{ formatMoneyBRL(c.valor) }}</td>
          <td>
              <span
                class="badge"
                [class.warning]="c.status==='EM_ANDAMENTO'"
                [class.success]="c.status==='FINALIZADA'"
                [class.danger]="c.status==='CANCELADA'"
              >
                {{ labelStatus(c.status) }}
              </span>
          </td>
          <td class="actions">
            <button class="icon-btn" type="button" (click)="ver(c)" title="Ver">
              <i class="fas fa-eye"></i>
            </button>
            <button class="icon-btn edit" type="button" (click)="editar(c)" title="Editar">
              <i class="fas fa-pen"></i>
            </button>
          </td>
        </tr>

        <tr *ngIf="filtered.length === 0">
          <td colspan="7" class="empty">Nenhuma carga encontrada.</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
